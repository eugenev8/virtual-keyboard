(()=>{"use strict";var e={};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,r=function(e,n){if("object"!==t(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(r)?r:String(r)),o)}var r}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var i=n.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentLanguage="en",this.soundVolume=1}var t,i;return t=e,(i=[{key:"toggleLanguage",value:function(e){this.currentLanguage="ru"===e?"ru":"en"}}])&&n(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===o(r)?r:String(r)),i)}var r}function a(e){var t="function"==typeof Map?new Map:void 0;return a=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return u(e,arguments,l(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),s(i,e)},a(e)}function u(e,t,n){return u=c()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&s(o,n.prototype),o},u.apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(y,e);var t,n,i,a,u=(i=y,a=c(),function(){var e,t=l(i);if(a){var n=l(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function y(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),(t=u.call(this)).code=e.code,t.keyEn=e.keyEn,t.keyRu=e.keyRu,t.keyEnShift=e.keyEnShift,t.keyRuShift=e.keyRuShift,t.isPressed=!1,t.isShifted=!1,t}return t=y,(n=[{key:"setRuLanguage",value:function(){this.isShifted?this.textContent=this.keyRuShift:this.textContent=this.keyRu}},{key:"setEnLanguage",value:function(){this.isShifted?this.textContent=this.keyEnShift:this.textContent=this.keyEn}},{key:"setActiveState",value:function(){return"CapsLock"===this.code?0:(this.isPressed=!0,this.classList.add("key_active"),1)}},{key:"setDefaultState",value:function(){return"CapsLock"===this.code?0:(this.isPressed=!1,this.classList.remove("key_active"),1)}},{key:"handleShift",value:function(e,t,n,i){return this.keyEnShift&&!e.repeat&&("keydown"===e.type?n?this.isShifted?this.Unshift(t):this.isShifted||this.activateShift(t):n||this.activateShift(t):"keyup"===e.type||"mouseup"===e.type||"mouseleave"===e.type?n?this.isShifted?this.isShifted&&this.Unshift(t):this.activateShift(t):n||this.Unshift(t):"click"===e.type&&(i?n?this.isShifted?this.Unshift(t):this.isShifted||this.activateShift(t):n||this.activateShift(t):n?this.isShifted?this.Unshift(t):this.activateShift(t):this.Unshift(t))),0}},{key:"toggleCaps",value:function(e,t,n){"CapsBtn"===e&&this.classList.toggle("key_active"),this.keyEnShift&&(t?this.isShifted?this.Unshift(n):this.isShifted||this.activateShift(n):t||(this.isShifted?this.Unshift(n):this.activateShift(n)))}},{key:"activateShift",value:function(e){"ru"===e?this.ShiftRu():this.ShiftEn(),this.isShifted=!0}},{key:"Unshift",value:function(e){"ru"===e?this.UnshiftRu():this.UnshiftEn(),this.isShifted=!1}},{key:"ShiftRu",value:function(){this.textContent=this.keyRuShift}},{key:"ShiftEn",value:function(){this.textContent=this.keyEnShift}},{key:"UnshiftRu",value:function(){this.textContent=this.keyRu}},{key:"UnshiftEn",value:function(){this.textContent=this.keyEn}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),y}(a(HTMLElement));function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==h(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===h(o)?o:String(o)),i)}var o}customElements.define("keyboard-key",y);var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"createElement",value:function(e,t){var n=document.createElement(e);return t&&(n.className=t),n}},{key:"getElement",value:function(e){return document.querySelector(e)}}],null&&d(t.prototype,null),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function p(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function b(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==k(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==k(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===k(o)?o:String(o)),i)}var o}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(i);if(o){var n=S(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this)).isCapsLocked=!1,t.isKeyboardShifted=!1;var n=e;return t.allKeys=[],n.forEach((function(e){t.createKey(e)})),t.lettersArray=t.allKeys.slice(15,25).concat(t.allKeys.slice(30,39)).concat(t.allKeys.slice(43,50)),t.boardDOM=f.createElement("div","keyboard"),t.createRows(),t}return t=a,(n=[{key:"returnBoard",value:function(){return this.boardDOM}},{key:"createRows",value:function(){var e=f.createElement("div","keyboard__row"),t=f.createElement("div","keyboard__row"),n=f.createElement("div","keyboard__row"),i=f.createElement("div","keyboard__row"),o=f.createElement("div","keyboard__row");e.append.apply(e,p(this.allKeys.slice(0,14))),t.append.apply(t,p(this.allKeys.slice(14,29))),n.append.apply(n,p(this.allKeys.slice(29,42))),i.append.apply(i,p(this.allKeys.slice(42,55))),o.append.apply(o,p(this.allKeys.slice(55,64))),this.boardDOM.append(e,t,n,i,o)}},{key:"createKey",value:function(e){var t=new y(e);this.allKeys.push(t)}},{key:"setRuLanguage",value:function(){this.allKeys.forEach((function(e){e.setRuLanguage()}))}},{key:"setEnLanguage",value:function(){this.allKeys.forEach((function(e){e.setEnLanguage()}))}},{key:"handleKeyPress",value:function(e,t){this.setActiveKey(e),"CapsLock"===e.code&&"keyup"===e.type&&this.handleCaps(e,t),"Shift"===e.key&&this.handleShift(e,t)}},{key:"handleClick",value:function(e,t){this.setActiveKey(e),"CapsLock"===e.target.code&&this.handleCaps(e,t),"ShiftLeft"!==e.target.code&&"ShiftRight"!==e.target.code||"click"!==e.type||(this.allKeys[0].isShifted?this.isKeyboardShifted=!1:this.isKeyboardShifted=!0,this.handleShift(e,t,this.isKeyboardShifted))}},{key:"setActiveKey",value:function(e){this.allKeys.forEach((function(t){t.code===e.code||t.code===e.target.code?"keydown"===e.type||"mousedown"===e.type?t.setActiveState():t.setDefaultState():"keyup"!==e.type&&"mouseup"!==e.type&&"mouseleave"!==e.type||t.isPressed||t.setDefaultState()}))}},{key:"handleShift",value:function(e,t,n){var i=this;this.allKeys.forEach((function(o){o.handleShift(e,t,i.isCapsLocked,n)}))}},{key:"handleCaps",value:function(e,t){var n=this,i=e.code||e.target.code;"click"!==e.type&&"keyup"!==e.type||(this.isCapsLocked=!this.isCapsLocked,this.lettersArray.forEach((function(e){e.toggleCaps(null,n.isCapsLocked,t)})),this.allKeys.find((function(e){return e.code===i})).toggleCaps("CapsBtn"))}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(f);const E=e.p+"a374f3d5f4c0c6e4b500.mp4",w=e.p+"bcf26c0946394d8a939a.webm",R=e.p+"51cd731680d70143b7b3.mp3",_=e.p+"d9b222e9f34d158c28a2.mp3",A=e.p+"81c28676697ab11bed7d.mp3";function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function K(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==L(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==L(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===L(o)?o:String(o)),i)}var o}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=T(i);if(o){var n=T(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=r.call(this)).allKeysObjects=[{code:"Backquote",keyEn:"`",keyRu:"ё",keyEnShift:"~",keyRuShift:"Ё"},{code:"Digit1",keyEn:"1",keyRu:"1",keyEnShift:"!",keyRuShift:"!"},{code:"Digit2",keyEn:"2",keyRu:"2",keyEnShift:"@",keyRuShift:'"'},{code:"Digit3",keyEn:"3",keyRu:"3",keyEnShift:"#",keyRuShift:"№"},{code:"Digit4",keyEn:"4",keyRu:"4",keyEnShift:"$",keyRuShift:";"},{code:"Digit5",keyEn:"5",keyRu:"5",keyEnShift:"%",keyRuShift:"%"},{code:"Digit6",keyEn:"6",keyRu:"6",keyEnShift:"^",keyRuShift:":"},{code:"Digit7",keyEn:"7",keyRu:"7",keyEnShift:"&",keyRuShift:"?"},{code:"Digit8",keyEn:"8",keyRu:"8",keyEnShift:"*",keyRuShift:"*"},{code:"Digit9",keyEn:"9",keyRu:"9",keyEnShift:"(",keyRuShift:"("},{code:"Digit0",keyEn:"0",keyRu:"0",keyEnShift:")",keyRuShift:")"},{code:"Minus",keyEn:"-",keyRu:"-",keyEnShift:"_",keyRuShift:"_"},{code:"Equal",keyEn:"=",keyRu:"=",keyEnShift:"+",keyRuShift:"+"},{code:"Backspace",keyEn:"Bs",keyRu:"Bs"},{code:"Tab",keyEn:"Tab",keyRu:"Tab"},{code:"KeyQ",keyEn:"q",keyRu:"й",keyEnShift:"Q",keyRuShift:"Й"},{code:"KeyW",keyEn:"w",keyRu:"ц",keyEnShift:"W",keyRuShift:"Ц"},{code:"KeyE",keyEn:"e",keyRu:"у",keyEnShift:"E",keyRuShift:"У"},{code:"KeyR",keyEn:"r",keyRu:"к",keyEnShift:"R",keyRuShift:"К"},{code:"KeyT",keyEn:"t",keyRu:"е",keyEnShift:"T",keyRuShift:"Е"},{code:"KeyY",keyEn:"y",keyRu:"н",keyEnShift:"Y",keyRuShift:"Н"},{code:"KeyU",keyEn:"u",keyRu:"г",keyEnShift:"U",keyRuShift:"Г"},{code:"KeyI",keyEn:"i",keyRu:"ш",keyEnShift:"I",keyRuShift:"Ш"},{code:"KeyO",keyEn:"o",keyRu:"щ",keyEnShift:"O",keyRuShift:"Щ"},{code:"KeyP",keyEn:"p",keyRu:"з",keyEnShift:"P",keyRuShift:"З"},{code:"BracketLeft",keyEn:"[",keyRu:"х",keyEnShift:"{",keyRuShift:"Х"},{code:"BracketRight",keyEn:"]",keyRu:"ъ",keyEnShift:"}",keyRuShift:"Ъ"},{code:"Backslash",keyEn:"\\",keyRu:"\\",keyEnShift:"|",keyRuShift:"/"},{code:"Delete",keyEn:"Del",keyRu:"Del"},{code:"CapsLock",keyEn:"CLock",keyRu:"CLock"},{code:"KeyA",keyEn:"a",keyRu:"ф",keyEnShift:"A",keyRuShift:"Ф"},{code:"KeyS",keyEn:"s",keyRu:"ы",keyEnShift:"S",keyRuShift:"Ы"},{code:"KeyD",keyEn:"d",keyRu:"в",keyEnShift:"D",keyRuShift:"В"},{code:"KeyF",keyEn:"f",keyRu:"а",keyEnShift:"F",keyRuShift:"А"},{code:"KeyG",keyEn:"g",keyRu:"п",keyEnShift:"G",keyRuShift:"П"},{code:"KeyH",keyEn:"h",keyRu:"р",keyEnShift:"H",keyRuShift:"Р"},{code:"KeyJ",keyEn:"j",keyRu:"о",keyEnShift:"J",keyRuShift:"О"},{code:"KeyK",keyEn:"k",keyRu:"л",keyEnShift:"K",keyRuShift:"Л"},{code:"KeyL",keyEn:"l",keyRu:"д",keyEnShift:"L",keyRuShift:"Д"},{code:"Semicolon",keyEn:";",keyRu:"ж",keyEnShift:":",keyRuShift:"Ж"},{code:"Quote",keyEn:"'",keyRu:"э",keyEnShift:'"',keyRuShift:"Э"},{code:"Enter",keyEn:"Enter",keyRu:"Enter"},{code:"ShiftLeft",keyEn:"Shift",keyRu:"Shift"},{code:"KeyZ",keyEn:"z",keyRu:"я",keyEnShift:"Z",keyRuShift:"Я"},{code:"KeyX",keyEn:"x",keyRu:"ч",keyEnShift:"X",keyRuShift:"Ч"},{code:"KeyC",keyEn:"c",keyRu:"с",keyEnShift:"C",keyRuShift:"С"},{code:"KeyV",keyEn:"v",keyRu:"м",keyEnShift:"V",keyRuShift:"М"},{code:"KeyB",keyEn:"b",keyRu:"и",keyEnShift:"B",keyRuShift:"И"},{code:"KeyN",keyEn:"n",keyRu:"т",keyEnShift:"N",keyRuShift:"Т"},{code:"KeyM",keyEn:"m",keyRu:"ь",keyEnShift:"M",keyRuShift:"Ь"},{code:"Comma",keyEn:",",keyRu:"б",keyEnShift:"<",keyRuShift:"Б"},{code:"Period",keyEn:".",keyRu:"ю",keyEnShift:">",keyRuShift:"Ю"},{code:"Slash",keyEn:"/",keyRu:".",keyEnShift:"?",keyRuShift:","},{code:"ArrowUp",keyEn:"▲",keyRu:"▲"},{code:"ShiftRight",keyEn:"Shift",keyRu:"Shift"},{code:"ControlLeft",keyEn:"Ctrl",keyRu:"Ctrl"},{code:"MetaLeft",keyEn:"Meta",keyRu:"Meta"},{code:"AltLeft",keyEn:"Alt",keyRu:"Alt"},{code:"Space",keyEn:" ",keyRu:" "},{code:"AltRight",keyEn:"Alt",keyRu:"Alt"},{code:"ArrowLeft",keyEn:"◄",keyRu:"◄"},{code:"ArrowDown",keyEn:"▼",keyRu:"▼"},{code:"ArrowRight",keyEn:"►",keyRu:"►"}],e.keysForTextarea=["Enter","Tab","Space","Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","Backslash"],e.app=f.createElement("div","root"),e.addBackground();var t=f.createElement("div","app__block app__block_up");e.addTextarea(),t.append(e.label,e.textArea);var n=f.createElement("div","app__block app__block_down");return e.board=new m(e.allKeysObjects),n.append(e.board.returnBoard()),e.addNotification(),e.addMenu(),e.addSounds(),e.app.append(e.backgroundVideo,t,n,e.notification),e.app.append(e.menu,e.menuBtn),document.querySelector("body").appendChild(e.app),e}return t=a,(n=[{key:"addTextarea",value:function(){this.textArea=f.createElement("textarea","textArea"),this.textArea.rows=10,this.textArea.cols=30,this.textArea.id="TextArea",this.label=f.createElement("label","textArea_label"),this.label.setAttribute("for","TextArea"),this.label.textContent="Tell us your story:"}},{key:"addSounds",value:function(){this.rainSound=new Audio(R),this.rainSound.loop=!0,this.keyboardSound1=new Audio(_),this.keyboardSound2=new Audio(A),this.setVolume(0)}},{key:"addBackground",value:function(){var e=this;this.backgroundVideo=f.createElement("video","backgroundVideo"),this.backgroundVideo.autoplay=!0,this.backgroundVideo.loop=!0,this.backgroundVideo.muted=!0,this.backgroundVideo.playsinline=!0,this.backgroundVideo.innerHTML="<source src=".concat(w,' type="video/webm">\n    <source src=').concat(E,' type="video/mp4">'),document.hidden?this.isBackgroundActive=!1:this.isBackgroundActive=!0,document.addEventListener("visibilitychange",(function(){if(document.hidden){if(!e.isBackgroundActive)return 1;e.isBackgroundActive=!1,e.isBackgroundForceClosed=!0}else{if(!e.isBackgroundForceClosed)return 1;e.isBackgroundActive=!0,e.isBackgroundForceClosed=!1}return e.toggleBackground(),0}))}},{key:"enableRainSound",value:function(){this.btnToggleBackground_switch.checked&&(this.rainSound.muted=!1,this.rainSound.play())}},{key:"disableRainSound",value:function(){this.rainSound.muted=!0,this.rainSound.pause()}},{key:"addNotification",value:function(){var e=this;this.notification=f.createElement("div","notification"),this.description=f.createElement("div","notification__description"),this.agreeBtn=f.createElement("button","notification__button"),this.agreeBtn.addEventListener("click",(function(){e.setVolume(.5),e.notification.style.transform="translateY(120%)",setTimeout((function(){e.notification.remove()}),300)})),this.notification.append(this.description,this.agreeBtn)}},{key:"addMenu",value:function(){var e=this;this.menu=f.createElement("div","menu"),this.menuBtn=f.createElement("button","menu__button"),this.menuBtn.innerHTML='\n    <svg fill="#000000" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 297 297" xml:space="preserve">\n    <g>\n    <g>\n    <g>\n    <path d="M279.368,24.726H102.992c-9.722,0-17.632,7.91-17.632,17.632V67.92c0,9.722,7.91,17.632,17.632,17.632h176.376\n    c9.722,0,17.632-7.91,17.632-17.632V42.358C297,32.636,289.09,24.726,279.368,24.726z"/>\n    <path d="M279.368,118.087H102.992c-9.722,0-17.632,7.91-17.632,17.632v25.562c0,9.722,7.91,17.632,17.632,17.632h176.376\n    c9.722,0,17.632-7.91,17.632-17.632v-25.562C297,125.997,289.09,118.087,279.368,118.087z"/>\n    <path d="M279.368,211.448H102.992c-9.722,0-17.632,7.91-17.632,17.633v25.561c0,9.722,7.91,17.632,17.632,17.632h176.376\n    c9.722,0,17.632-7.91,17.632-17.632v-25.561C297,219.358,289.09,211.448,279.368,211.448z"/>\n    <path d="M45.965,24.726H17.632C7.91,24.726,0,32.636,0,42.358V67.92c0,9.722,7.91,17.632,17.632,17.632h28.333\n    c9.722,0,17.632-7.91,17.632-17.632V42.358C63.597,32.636,55.687,24.726,45.965,24.726z"/>\n    <path d="M45.965,118.087H17.632C7.91,118.087,0,125.997,0,135.719v25.562c0,9.722,7.91,17.632,17.632,17.632h28.333\n    c9.722,0,17.632-7.91,17.632-17.632v-25.562C63.597,125.997,55.687,118.087,45.965,118.087z"/>\n    <path d="M45.965,211.448H17.632C7.91,211.448,0,219.358,0,229.081v25.561c0,9.722,7.91,17.632,17.632,17.632h28.333\n    c9.722,0,17.632-7.91,17.632-17.632v-25.561C63.597,219.358,55.687,211.448,45.965,211.448z"/>\n    </g>\n    </g>\n    </g>\n    </svg>',this.menuBtn.addEventListener("click",(function(){e.menu.classList.toggle("isToggled")}));var t=f.createElement("div","menu__item menu__soundToggle");this.btnToggleSound_range=f.createElement("input","menu__soundRange"),this.btnToggleSound_range.setAttribute("type","range"),this.btnToggleSound_range.id="SoundVolume",this.btnToggleSound_range.min=0,this.btnToggleSound_range.max=1,this.btnToggleSound_range.step=.01,this.labelForSound=f.createElement("label","menu__label"),this.labelForSound.textContent="Sound volume:",this.labelForSound.setAttribute("for","SoundVolume"),t.append(this.labelForSound,this.btnToggleSound_range),this.menu.appendChild(t);var n=f.createElement("div","menu__item menu__language");this.btnToggleLanguage_switch=f.createElement("input","menu__language"),this.btnToggleLanguage_switch.setAttribute("type","checkbox"),this.btnToggleLanguage_switch.id="Language",this.btnToggleLanguage_switch.checked=!0,this.labelForLanguage=f.createElement("label","menu__label"),this.labelForLanguage.id="Label-language",this.labelForLanguage.textContent="Сменить язык /  Change language",this.labelForLanguage.setAttribute("for","Language"),n.append(this.labelForLanguage,this.btnToggleLanguage_switch),this.menu.appendChild(n);var i=f.createElement("div","menu__item menu__language");this.btnToggleBackground_switch=f.createElement("input","menu__background"),this.btnToggleBackground_switch.setAttribute("type","checkbox"),this.btnToggleBackground_switch.checked=!0,this.btnToggleBackground_switch.id="Background",this.labelForBackground=f.createElement("label","menu__label"),this.labelForBackground.textContent="Background video:",this.labelForBackground.setAttribute("for","Background"),i.append(this.labelForBackground,this.btnToggleBackground_switch),this.btnToggleBackground_switch.addEventListener("input",(function(){e.isBackgroundActive=!e.isBackgroundActive,e.toggleBackground()})),this.menu.appendChild(i)}},{key:"toggleBackground",value:function(){this.isBackgroundActive?(this.app.appendChild(this.backgroundVideo),this.backgroundVideo.play(),this.btnToggleBackground_switch.checked=!0,this.setVolume(this.keyboardSound1.volume)):(this.backgroundVideo.remove(),this.disableRainSound(),this.btnToggleBackground_switch.checked=!1)}},{key:"addKey",value:function(e){var t=new y(e);return this.allKeysObjects.push(t),t}},{key:"toggleLanguage",value:function(e){"ru"===e?(this.label.textContent="Расскажите свою историю:",this.labelForSound.textContent="Громкость звуков:",this.labelForBackground.textContent="Видео на фоне:",this.description.innerHTML='Создано в Windows.<br>Переключить язык можно в меню справа вверху, либо комбинацией "ctrl + alt".',this.agreeBtn.innerHTML="Понятно",this.btnToggleLanguage_switch.checked=!1,this.board.setRuLanguage()):(this.label.textContent="Tell us your story:",this.labelForSound.textContent="Sound volume:",this.labelForBackground.textContent="Background video:",this.description.innerHTML='Created in Windows.<br>You can switch the language in the top right menu, or by pressing "ctrl + alt".',this.agreeBtn.innerHTML="Understood",this.btnToggleLanguage_switch.checked=!0,this.board.setEnLanguage())}},{key:"handleKeyPress",value:function(e,t){var n=this;return e.repeat||this.board.handleKeyPress(e,t),"click"===e.type&&e.target.matches(".keyboard")?1:(this.playPressSound(e),this.board.allKeys.forEach((function(t){t.code!==e.code&&t.code!==e.target.code||n.handleTextArea(t.textContent,e)})),0)}},{key:"playPressSound",value:function(e){return this.keyboardSound1.muted?1:"CapsLock"===e.code?"keyup"===e.type?(this.keyboardSound2.currentTime=0,this.keyboardSound2.play(),0):1:"keydown"===e.type||"click"===e.type?this.keysForTextarea.includes(e.code)?e.repeat?(this.keyboardSound1.currentTime=0,this.keyboardSound1.play(),0):(e.repeat||(this.keyboardSound2.currentTime=0,this.keyboardSound2.play()),0):e.repeat?0:(this.keyboardSound2.currentTime=0,this.keyboardSound2.play(),1):0}},{key:"setVolume",value:function(e){0===e?(this.btnToggleSound_range.classList.add("isMuted"),this.keyboardSound1.muted=!0,this.keyboardSound2.muted=!0,this.disableRainSound()):(this.btnToggleSound_range.classList.remove("isMuted"),this.keyboardSound1.muted=!1,this.keyboardSound2.muted=!1,this.enableRainSound()),this.rainSound.volume=e,this.keyboardSound1.volume=e,this.keyboardSound2.volume=e,this.btnToggleSound_range.value=e}},{key:"handleTextArea",value:function(e,t){return t.ctrlKey||t.metaKey?1:("keydown"!==t.type&&"click"!==t.type||(this.checkForAdding(e,t),this.checkForRemoval(t),this.checkForArrows(t),this.textArea.blur(),this.textArea.focus()),0)}},{key:"checkForAdding",value:function(e,t){var n=t.code||t.target.code;if(this.keysForTextarea.includes(n)){var i=e;"Space"===n&&(i=" "),"Tab"===n&&(i="   "),"Enter"===n&&(i="\n");var o=this.textArea.selectionStart,r=this.textArea.selectionEnd;if(this.textArea.value){var a=this.textArea.value.split("");a.splice(o,r-o,i),this.textArea.value=a.join(""),"Tab"===n?(this.textArea.selectionStart=o+3,this.textArea.selectionEnd=o+3):(this.textArea.selectionStart=o+1,this.textArea.selectionEnd=o+1)}else this.textArea.value+=i;return 0}return 1}},{key:"checkForRemoval",value:function(e){var t=e.code||e.target.code;if("Delete"===t){var n=this.textArea.selectionStart,i=this.textArea.selectionEnd,o=this.textArea.value.split("");o.splice(n,i-n==0?1:i-n),this.textArea.value=o.join(""),this.textArea.selectionStart=n,this.textArea.selectionEnd=n}if("Backspace"===t){var r=this.textArea.selectionStart,a=this.textArea.selectionEnd;if(0===r&&0===a)return 1;var u=this.textArea.value.split(""),c=a-r;return u.splice(0===c?r-1:r,0===c?1:c),this.textArea.value=u.join(""),c>0?(this.textArea.selectionStart=r,this.textArea.selectionEnd=r):(this.textArea.selectionStart=r-1,this.textArea.selectionEnd=r-1),0}return 1}},{key:"checkForArrows",value:function(e){var t=e.code||e.target.code;return"ArrowLeft"===t?0===this.textArea.selectionStart?1:(this.textArea.selectionStart-=1,this.textArea.selectionEnd-=1,0):"ArrowRight"===t?(this.textArea.selectionStart+=1,0):"ArrowUp"===t?(this.textArea.selectionStart>=5?(this.textArea.selectionStart-=5,this.textArea.selectionEnd-=5):(this.textArea.selectionStart=0,this.textArea.selectionEnd=0),0):"ArrowDown"===t?(this.textArea.selectionStart+=5,0):1}}])&&K(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(f);function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function O(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==B(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==B(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===B(o)?o:String(o)),i)}var o}var j=new(function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this.view=n,window.addEventListener("load",(function(){i.getData()}))}var t,n;return t=e,(n=[{key:"setLanguage",value:function(e){this.model.toggleLanguage(e),this.view.toggleLanguage(this.model.currentLanguage)}},{key:"setVolume",value:function(e){this.model.soundVolume=e,this.view.setVolume(e)}},{key:"handleEvent",value:function(e,t){this.view.handleKeyPress(e,t)}},{key:"saveData",value:function(){var e={language:this.model.currentLanguage,background:this.view.isBackgroundActive};localStorage.setItem("e8Keyboard",JSON.stringify(e))}},{key:"getData",value:function(){var e=JSON.parse(localStorage.getItem("e8Keyboard"));e&&(this.setLanguage(e.language),document.hidden?this.view.isBackgroundActive=!1:this.view.isBackgroundActive=e.background,this.view.toggleBackground())}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())(new i,new C),P=JSON.parse(localStorage.getItem("eugenevKeyboard"))||null;P?j.setLanguage(P.lang):j.setLanguage("en"),document.addEventListener("keydown",(function(e){if(e.preventDefault(),e.stopPropagation(),j.handleEvent(e,j.model.currentLanguage),"Alt"===e.key&&e.ctrlKey||"Control"===e.key&&e.altKey){if("ru"===j.model.currentLanguage)return j.setLanguage("en"),j.saveData(),0;j.setLanguage("ru"),j.saveData()}return 0})),document.addEventListener("keyup",(function(e){return e.preventDefault(),e.stopPropagation(),j.handleEvent(e,j.model.currentLanguage),0})),j.view.board.boardDOM.addEventListener("click",(function(e){return e.preventDefault(),e.stopPropagation(),j.handleEvent(e,j.model.currentLanguage),0})),j.view.board.allKeys.forEach((function(e){e.addEventListener("mousedown",(function(e){e.target&&j.view.board.handleClick(e,j.model.currentLanguage)})),e.addEventListener("mouseup",(function(e){e.target&&j.view.board.handleClick(e,j.model.currentLanguage)})),e.addEventListener("mouseleave",(function(e){e.target&&j.view.board.handleClick(e,j.model.currentLanguage)})),e.addEventListener("click",(function(e){e.target&&j.view.board.handleClick(e,j.model.currentLanguage)}))})),j.view.btnToggleSound_range.addEventListener("input",(function(){j.setVolume(j.view.btnToggleSound_range.value)})),j.view.btnToggleSound_range.addEventListener("change",(function(){j.saveData()})),j.view.btnToggleBackground_switch.addEventListener("change",(function(){j.saveData()})),j.view.btnToggleLanguage_switch.addEventListener("change",(function(){!0===j.view.btnToggleLanguage_switch.checked?j.setLanguage("en"):j.setLanguage("ru"),j.saveData()}))})();